import{e as $,f as q,g as z,h as K,c as u,a as e,i as O,j as p,t as o,n as I,b,k as J,l as m,v as V,m as x,p as G,F as H,q as n,o as d,_ as Q}from"./index-BxHykKpa.js";import{_ as W}from"./caratriste-BjpcRows.js";import{V as X}from"./VirtualKeyboard-Dc7ptSOX.js";const Y={key:0,class:"fixed inset-0 bg-opacity-60 flex items-center justify-center z-80"},Z={class:"bg-gray-300 rounded-lg shadow-lg p-8 flex flex-col items-center max-w-md w-full"},ee={key:0,class:"flex flex-col items-center w-full"},te={class:"loan-steps-container max-w-4xl mx-auto py-10"},le={key:0,class:"w-full flex justify-end mb-2 pr-8"},se={class:"bg-gray-800 text-white px-4 py-2 rounded shadow text-sm font-bold"},oe={class:"flex flex-col md:flex-row justify-between items-center mb-10 gap-2"},ne={class:"flex-1 flex flex-col items-center mb-4 md:mb-0"},ae={class:"text-center text-lg font-semibold"},de={class:"flex-1 flex flex-col items-center mb-4 md:mb-0"},ie={class:"text-center text-lg font-semibold"},re={class:"flex-1 flex flex-col items-center"},ue={class:"text-center text-lg font-semibold"},be={class:"bg-white rounded shadow p-6 max-w-7xl mx-auto"},me={class:"flex flex-col xl:flex-row gap-8"},pe={class:"flex-[2] w-full"},ce={key:0,class:"flex flex-col md:flex-row gap-8 w-full"},ve={class:"flex-1 min-w-[260px] w-full"},xe={class:"flex mb-4"},fe={class:"mb-4"},ge={class:"mb-4"},ye={class:"mb-4"},we={class:"mb-4 flex items-center gap-2"},ke={class:"bg-gray-200 px-3 py-2 rounded font-mono text-lg select-none"},he={class:"flex-1 min-w-[260px] w-full flex flex-col justify-between"},_e={class:"bg-slate-50 border rounded p-4"},Ce={class:"mb-1"},De={class:"mb-1"},Ne={class:"mb-1"},Se={class:"mb-1"},Ie={class:"text-primary font-bold"},Ve={key:1,class:"flex flex-col gap-8 w-full"},Pe={class:"max-w-xl w-full mx-auto"},Ue={class:"mb-6"},je={class:"mb-6"},Me={class:"mb-6"},Te={class:"flex justify-end"},Be={key:2,class:"flex flex-col gap-8 w-full"},Ee={key:0,class:"max-w-5xl w-full mx-auto px-8"},qe={class:"grid grid-cols-3 gap-x-12 gap-y-2"},Fe={class:"mb-2"},Ae={class:"border rounded px-4 py-3 text-lg bg-gray-50 w-48"},Re={class:"mb-2"},Le={class:"border rounded px-4 py-3 text-lg bg-gray-50 w-48"},$e={class:"mb-2"},ze={class:"border rounded px-4 py-3 text-lg bg-gray-50 w-48"},Ke={class:"mb-2"},Oe={class:"border rounded px-4 py-3 text-lg bg-gray-50 w-48"},Je={class:"mb-2"},Ge={class:"border rounded px-4 py-3 text-lg bg-gray-50 w-48"},He={class:"mb-2"},Qe={class:"border rounded px-4 py-3 text-lg bg-gray-50 w-48"},We={class:"mb-2"},Xe={class:"border rounded px-4 py-3 text-lg bg-gray-50 w-48"},Ye={class:"mb-2"},Ze={class:"border rounded px-4 py-3 text-lg bg-gray-50 w-48"},et={class:"mb-2"},tt={class:"border rounded px-4 py-3 text-lg bg-gray-50 w-48"},lt={class:"mb-2"},st={class:"border rounded px-4 py-3 text-lg bg-gray-50 w-48"},ot={key:1,class:"max-w-2xl w-full mx-auto px-8 py-12 flex flex-col items-center justify-center bg-green-50 rounded shadow"},nt={class:"text-lg text-green-800 mb-2"},at={class:"font-mono font-bold"},dt={class:"text-lg text-green-800 mb-6"},it={class:"font-mono font-bold"},rt=$({__name:"LoanRequest",setup(ut){const D=n(120),F=n(!1);let g=null;function P(){window.location.replace("/")}function A(){c.value="DNI",r.value="",y.value="",w.value="",f.value="",k.value=!1,S.value="",h.value="",_.value="",C.value="",v.value=null,i.value=1}function U(){window.location.href="/sesion-expirada"}q(()=>{if(performance&&performance.getEntriesByType){const a=performance.getEntriesByType("navigation");if(Array.isArray(a)&&a.length>0&&a[0]&&"type"in a[0]&&a[0].type==="reload"){U();return}}g=setInterval(()=>{D.value>0?D.value--:(clearInterval(g),A(),U())},1e3)}),z(()=>{g&&clearInterval(g)});const i=n(1),y=n(""),j=n(!1),M=n(""),T=n("");function R(){j.value=!0,M.value=Math.floor(1e8+Math.random()*9e8).toString();const a=new Date;T.value=a.toISOString().slice(0,10)}function N(a){return a===i.value?"inline-block px-4 py-2 rounded-full bg-primary text-white shadow-md border-2 border-primary":a<i.value?"inline-block px-4 py-2 rounded-full bg-green-500 text-white border-2 border-green-500":"inline-block px-4 py-2 rounded-full bg-gray-200 text-gray-400 border-2 border-gray-200"}const c=n("DNI"),r=n(""),w=n(""),f=n(""),k=n(!1),B=n(""),S=n(""),v=n(null),h=n(""),_=n(""),C=n(""),s={amount:0,months:0,rate:0,monthlyPayment:0};q(()=>{try{const a=localStorage.getItem("simulacion-prestamo");if(a){const t=JSON.parse(a);t&&typeof t=="object"&&(s.amount=t.amount??s.amount,s.months=t.months??s.months,s.rate=t.rate??s.rate,s.monthlyPayment=t.monthlyPayment??s.monthlyPayment)}}catch{}});function E(){B.value=Math.random().toString(36).substring(2,8).toUpperCase()}K(()=>!0,()=>{E()},{immediate:!0});function L(){if(c.value==="DNI"&&r.value==="43479171"){v.value=!0,i.value=2;return}c.value==="DNI"&&r.value.length===8||c.value==="RUC"&&r.value.length===11?v.value=parseInt(r.value.slice(-1))%2===0:v.value=!1}return(a,t)=>(d(),u(H,null,[v.value===!1&&i.value===1&&r.value!=="43479171"?(d(),u("div",Y,[e("div",Z,[v.value?p("",!0):(d(),u("div",ee,[t[13]||(t[13]=O('<img src="'+W+'" alt=":(" class="w-28 h-28 mb-4" data-v-0c146ddb><span class="text-red-600 font-bold text-lg mb-2 text-center" data-v-0c146ddb>No calificas para un préstamo en este momento.</span><span class="text-gray-700 text-base mb-4 text-center" data-v-0c146ddb>Tu Calificación SBS es:<br data-v-0c146ddb><span class="font-bold text-yellow-400 text-xl" data-v-0c146ddb>CPP</span></span><div class="flex flex-col items-start w-full max-w-xs mx-auto" data-v-0c146ddb><div class="flex items-center mb-1" data-v-0c146ddb><span class="inline-block w-4 h-4 rounded-sm mr-2 align-middle" style="background-color:#22c55e;" data-v-0c146ddb></span><span class="font-semibold" data-v-0c146ddb>Normal</span></div><div class="flex items-center mb-1" data-v-0c146ddb><span class="inline-block w-4 h-4 rounded-sm mr-2 align-middle" style="background-color:#fde047;" data-v-0c146ddb></span><span class="font-semibold" data-v-0c146ddb>CPP</span></div><div class="flex items-center mb-1" data-v-0c146ddb><span class="inline-block w-4 h-4 rounded-sm mr-2 align-middle" style="background-color:#fbbf24;" data-v-0c146ddb></span><span class="font-semibold" data-v-0c146ddb>Deficiente</span></div><div class="flex items-center mb-1" data-v-0c146ddb><span class="inline-block w-4 h-4 rounded-sm mr-2 align-middle" style="background-color:#f97316;" data-v-0c146ddb></span><span class="font-semibold" data-v-0c146ddb>Dudoso</span></div><div class="flex items-center mb-1" data-v-0c146ddb><span class="inline-block w-4 h-4 rounded-sm mr-2 align-middle" style="background-color:#dc2626;" data-v-0c146ddb></span><span class="font-semibold" data-v-0c146ddb>Pérdida</span></div></div>',4)),e("button",{onClick:P,class:"bg-primary text-white px-8 py-3 rounded font-bold text-lg"},"Ir a página principal")]))])])):p("",!0),e("div",te,[F.value?p("",!0):(d(),u("div",le,[e("span",se,"Sesión: "+o(D.value)+"s",1)])),e("div",oe,[e("div",ne,[e("p",ae,[e("span",{class:I(N(1))},[...t[14]||(t[14]=[b("Paso 1: ",-1),e("span",{class:"font-normal"},"Validar Datos",-1)])],2)])]),e("div",de,[e("p",ie,[e("span",{class:I(N(2))},[...t[15]||(t[15]=[b("Paso 2: ",-1),e("span",{class:"font-normal"},"Configurar desembolso",-1)])],2)])]),e("div",re,[e("p",ue,[e("span",{class:I(N(3))},[...t[16]||(t[16]=[b("Paso 3: ",-1),e("span",{class:"font-normal"},"Confirmar desembolso",-1)])],2)])])]),e("div",be,[e("form",{onSubmit:J(L,["prevent"])},[e("div",me,[e("div",pe,[i.value===1?(d(),u("div",ce,[e("div",ve,[t[19]||(t[19]=e("h2",{class:"text-lg font-bold mb-4 text-left text-blue-900"},"Datos Cliente",-1)),e("div",xe,[m(e("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>c.value=l),class:"border rounded-l px-4 py-3 text-lg bg-white"},[...t[17]||(t[17]=[e("option",{value:"DNI"},"DNI",-1),e("option",{value:"RUC"},"RUC",-1)])],512),[[V,c.value]]),m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>r.value=l),type:"text",placeholder:"Nro Documento",class:"w-full border-t border-b border-r rounded-r px-4 py-3 text-lg placeholder-gray-400",required:""},null,512),[[x,r.value]])]),e("div",fe,[m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>y.value=l),type:"email",placeholder:"Correo electrónico",class:"w-full border rounded px-4 py-3 text-lg placeholder-gray-400",required:""},null,512),[[x,y.value]])]),e("div",ge,[m(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>w.value=l),type:"text",maxlength:"16",minlength:"13",pattern:"[0-9]*",inputmode:"numeric",placeholder:"Número de tarjeta",class:"w-full border rounded px-4 py-3 text-lg placeholder-gray-400",required:""},null,512),[[x,w.value]])]),e("div",ye,[t[18]||(t[18]=e("label",{class:"block mb-1 font-semibold text-blue-700"},"Clave de internet de 6 dígitos",-1)),m(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>f.value=l),type:"password",maxlength:"6",minlength:"6",pattern:"[0-9]*",inputmode:"numeric",placeholder:"Clave de 6 dígitos",class:"w-full border-2 border-blue-400 rounded px-4 py-3 text-lg placeholder-gray-400 focus:outline-none focus:border-blue-700 mb-2",readonly:"",onFocus:t[5]||(t[5]=l=>k.value=!0)},null,544),[[x,f.value]]),k.value?(d(),G(X,{key:0,modelValue:f.value,"onUpdate:modelValue":t[6]||(t[6]=l=>f.value=l),maxLength:6,title:"Clave de internet de 6 dígitos",onClose:t[7]||(t[7]=l=>k.value=!1)},null,8,["modelValue"])):p("",!0)]),e("div",we,[m(e("input",{"onUpdate:modelValue":t[8]||(t[8]=l=>S.value=l),type:"text",maxlength:"6",placeholder:"Ingrese el captcha",class:"w-1/2 border rounded px-4 py-3 text-lg placeholder-gray-400",required:""},null,512),[[x,S.value]]),e("span",ke,o(B.value),1),e("button",{type:"button",onClick:E,class:"text-blue-600 hover:underline text-sm"},"Nuevo")])]),e("div",he,[e("div",null,[t[25]||(t[25]=e("h2",{class:"text-lg font-bold mb-4 text-left text-blue-900"},"Datos Simulación",-1)),e("div",_e,[e("p",Ce,[t[20]||(t[20]=e("span",{class:"font-semibold"},"Monto solicitado:",-1)),b(" S/ "+o(s.amount??"--"),1)]),e("p",De,[t[21]||(t[21]=e("span",{class:"font-semibold"},"Nro de cuotas:",-1)),b(" "+o(s.months??"--"),1)]),e("p",Ne,[t[22]||(t[22]=e("span",{class:"font-semibold"},"TEA:",-1)),b(" "+o(s.rate??"--")+"%",1)]),e("p",Se,[t[23]||(t[23]=e("span",{class:"font-semibold"},"Cuota mensual estimada:",-1)),t[24]||(t[24]=b()),e("span",Ie,"S/ "+o(s.monthlyPayment!==void 0&&s.monthlyPayment!==null?s.monthlyPayment.toFixed(2):"--"),1)])]),t[26]||(t[26]=e("div",{class:"p-4"},[e("button",{type:"submit",class:"bg-primary text-white px-6 py-3 rounded font-bold w-full mb-4"},"Consultar Calificación")],-1))])])])):p("",!0),i.value===2?(d(),u("div",Ve,[e("div",Pe,[e("div",Ue,[t[27]||(t[27]=e("label",{class:"block font-semibold mb-1"},"Fecha de pago",-1)),m(e("input",{"onUpdate:modelValue":t[9]||(t[9]=l=>h.value=l),type:"date",class:"w-full border rounded px-4 py-3 text-lg"},null,512),[[x,h.value]])]),e("div",je,[t[29]||(t[29]=e("label",{class:"block font-semibold mb-1"},"Cuenta destino",-1)),m(e("select",{"onUpdate:modelValue":t[10]||(t[10]=l=>_.value=l),class:"w-full border rounded px-4 py-3 text-lg"},[...t[28]||(t[28]=[e("option",{value:"80-533-0137465-3"},"80-533-0137465-3",-1),e("option",{value:"80-533-9876543-2"},"80-533-9876543-2",-1)])],512),[[V,_.value]])]),e("div",Me,[t[31]||(t[31]=e("label",{class:"block font-semibold mb-1"},"Cuenta de cobro",-1)),m(e("select",{"onUpdate:modelValue":t[11]||(t[11]=l=>C.value=l),class:"w-full border rounded px-4 py-3 text-lg"},[...t[30]||(t[30]=[e("option",{value:"80-533-0137465-3"},"80-533-0137465-3",-1),e("option",{value:"80-533-9876543-2"},"80-533-9876543-2",-1)])],512),[[V,C.value]])]),e("div",Te,[e("button",{type:"button",onClick:t[12]||(t[12]=l=>i.value=3),class:"bg-primary text-white px-8 py-3 rounded font-bold mt-4"},"Siguiente")])])])):p("",!0),i.value===3?(d(),u("div",Be,[j.value?(d(),u("div",ot,[t[49]||(t[49]=e("svg",{class:"w-20 h-20 text-green-500 mb-4",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"})],-1)),t[50]||(t[50]=e("h2",{class:"text-2xl font-bold text-green-700 mb-2"},"¡Desembolso ejecutado con éxito!",-1)),e("p",nt,[t[47]||(t[47]=b("N° de operación: ",-1)),e("span",at,o(M.value),1)]),e("p",dt,[t[48]||(t[48]=b("Fecha: ",-1)),e("span",it,o(T.value),1)]),e("button",{onClick:P,class:"bg-primary text-white px-8 py-3 rounded font-bold text-lg"},"Ir a página principal")])):(d(),u("div",Ee,[e("div",qe,[t[42]||(t[42]=e("div",null,[e("h3",{class:"text-base font-bold mb-4 text-left text-blue-900"},"Datos Cliente")],-1)),t[43]||(t[43]=e("div",null,[e("h3",{class:"text-base font-bold mb-4 text-left text-blue-900"},"Datos Crédito")],-1)),t[44]||(t[44]=e("div",null,[e("h3",{class:"text-base font-bold mb-4 text-left text-blue-900"},"Datos Desembolso")],-1)),e("div",Fe,[t[32]||(t[32]=e("label",{class:"block font-semibold"},"DNI",-1)),e("div",Ae,o(r.value),1)]),e("div",Re,[t[33]||(t[33]=e("label",{class:"block font-semibold"},"Monto solicitado",-1)),e("div",Le,"S/ "+o(s.amount),1)]),e("div",$e,[t[34]||(t[34]=e("label",{class:"block font-semibold"},"Cuenta destino (Ahorro S/)",-1)),e("div",ze,o(_.value),1)]),e("div",Ke,[t[35]||(t[35]=e("label",{class:"block font-semibold"},"Número de tarjeta",-1)),e("div",Oe,o(w.value),1)]),e("div",Je,[t[36]||(t[36]=e("label",{class:"block font-semibold"},"Cuota mensual estimada",-1)),e("div",Ge,"S/ "+o(s.monthlyPayment),1)]),e("div",He,[t[37]||(t[37]=e("label",{class:"block font-semibold"},"Cuenta de cobro (Ahorro S/) ",-1)),e("div",Qe,o(C.value),1)]),e("div",We,[t[38]||(t[38]=e("label",{class:"block font-semibold"},"Correo",-1)),e("div",Xe,o(y.value),1)]),e("div",Ye,[t[39]||(t[39]=e("label",{class:"block font-semibold"},"Nro de cuotas",-1)),e("div",Ze,o(s.months),1)]),e("div",et,[t[40]||(t[40]=e("label",{class:"block font-semibold"},"Fecha de pago",-1)),e("div",tt,o(h.value),1)]),t[45]||(t[45]=e("div",null,null,-1)),e("div",lt,[t[41]||(t[41]=e("label",{class:"block font-semibold"},"TEA",-1)),e("div",st,o(s.rate)+"%",1)]),t[46]||(t[46]=e("div",null,null,-1))]),e("div",{class:"flex justify-end mt-8"},[e("button",{type:"button",onClick:R,class:"bg-green-500 border-green-600 border text-white px-8 py-3 rounded font-bold"},"Confirmar Datos")])]))])):p("",!0)])])],32)])])],64))}}),ct=Q(rt,[["__scopeId","data-v-0c146ddb"]]);export{ct as default};
